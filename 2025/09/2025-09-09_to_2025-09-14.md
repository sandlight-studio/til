# 学习总结（2025-09-09 00:00:00 – 2025-09-14 23:59:59）

## ✅ 本周期结论
本周围绕 **后端工程与数据查询**、**Kotlin/校验与反序列化**、**公共卫生与成人免疫**、**宏观政策与金融机制**、**历史民俗与建筑识识** 五条线索形成可复用做法与认知框架；重点成果在于：**SQL 场景化排查模板**、**Kotlin Bean Validation 正确用法**、**ACH 到账时延与风险控制理解**、以及 **民俗/法制话题的结构化笔记**。

---

## 📚 学习要点

### 1) SQL 场景化排查（货通/识别任务）
- 明确“**未提交**或**识别失败**”的集合运算表达：  
  - 未提交：`A LEFT JOIN B ... WHERE b.id IS NULL`  
  - 识别失败：在任务明细表中过滤 `status IN ('FAILED','TIMEOUT',...)`
- 组合查询（示例）：
  ```sql
  -- 目标：取出所有 skc.design_code
  -- 条件：没有提交颜色识别任务，或提交但失败
  SELECT DISTINCT skc.design_code
  FROM skc
  LEFT JOIN ai_color_task t
         ON t.skc_id = skc.skc_id
  WHERE skc.is_deleted = 0
    AND (
         t.task_id IS NULL
         OR t.status IN ('FAILED','TIMEOUT','CANCELLED')
        );
    ```

* 调优要点：为关联键与过滤列建索引（如 `ai_color_task(skc_id,status)`，`skc(skc_id,is_deleted,design_code)`），避免回表放大。

### 2) Kotlin / Bean Validation / 反序列化路径

* 结论：`@DecimalMin` **不等价** `@NotNull`（不会做空校验）。**需要联合**：

  ```kotlin
  data class Req(
    @field:NotNull
    @field:DecimalMin("0", inclusive = false)
    val price: BigDecimal?
  )
  ```
* `@field:` 用在 **Kotlin 属性** 上，让注解作用于生成的字段/访问器，避免仅标注在构造参数而失效。
* 反序列化（Jackson/Jackson-Kotlin）：JSON → 调用**主构造器**；`val` 生成 getter、`var` 生成 getter/setter；可空（nullable）与非空（non-null）约束要与校验注解一致。
* `companion object` + `@JvmStatic`：提供 Java 友好的静态工厂；注意**可见性**与**泛型**边界声明，避免 “exposed outside its visibility” 报错。

### 3) 包命名与模块梳理（Excel Listener）

* 取名建议：业务能力用复数包名更符合“集合/扩展点”语义，如 `pop.excel.listeners`（目录下容纳多类监听器）。
* 与 Spring 组件扫描对齐：将 `listeners` 置于既有 `excel`/`importer` 模块内，避免跨层依赖。

### 4) Spring/Gradle 工程化要点（9/9 线程）

* 多模块骨架（`spring-core-demo / spring-mvc-demo / spring-data-demo / spring-boot-demo / jvm-lab / bench`）清晰覆盖 **框架核心—Web—数据—运行时—基准** 五层目标。
* `gradle-wrapper.properties` 可与本机 Gradle 高版本并存；**以 wrapper 为准**保证团队一致性。

### 5) 公共卫生与成人免疫（疫苗）

* 认识常见传染病与疫苗：**流感、乙肝、HPV** 等的传播途径、症状与并发症。
* 成人免疫补种原则（概念性复盘）：

  * **乙肝**：常用 20µg 规格（剂量/程序按说明书与接种门诊建议）。
  * **流感**：年度接种；与其他灭活疫苗通常可同日不同部位或任意间隔（以当地指南为准）。
  * **HPV**：男性接种的价值与年龄窗口（遵循获批适应症与医嘱）。
* 安全提示：个体差异显著，**以当地指南与专业医嘱为准**。

### 6) 金融机制与到账时延（ACH/可用余额）

* 场景：账户间转账显示“部分当日可用、剩余 T+2 可用”。
* 机制：**ACH/风控保留（risk hold）** 与 **资金可用性政策**导致**分段释放**；与银行对入账资金风险评估、支付网络结算批次相关。

### 7) 宏观政策与法治信息识读

* **要素市场化**：理解为对劳动力、土地、资本、数据等**要素的价格/流动/配置**引入市场化机制，试点涵盖若干都市圈与区域。观察点：**土地盘活、股权份额转让**等。
* **九月全国人大常委会立法**：跟进《突发公共卫生事件应对法》《食品安全法（修正）》等，明确**施行日期**与**合规口径**。

### 8) 货币政策与信誉（泰勒规则复盘）

* 公式要点：`it = r* + πt + 0.5(πt − π*) + 0.5(yt − y*)`（政策利率 ≈ 中性利率 + 通胀缺口 + 产出缺口）。
* 讨论焦点：**疫情后**通胀与产出偏离下，实际操作与泰勒规则背离的**原因与代价**（信誉、预期管理、通胀黏性）。

### 9) 历史民俗与建筑识识

* **妈祖信仰**：源流、传播区域、海外华人社群中的民间信仰形态；
* **城隍庙 vs 土地庙**：城市守护神与基层社神的职能差别；
* **屋脊“十兽”**：识别中国古建屋脊走兽体系与寓意；
* **大角山/碑刻**：本地文化地标与碑文信息的阅读方法。
