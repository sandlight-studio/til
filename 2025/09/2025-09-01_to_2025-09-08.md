**Filename:** `2025-09-01_to_2025-09-08.md`
# 学习总结（2025-09-01 00:00:00 – 2025-09-08 23:59:59）

## ✅ 本周期结论
本期聚焦三条主线：**金融计算与银行产品理解**、**后端工程与基础设施（网络/MQ/SQL/构建）**、**AI 工具与工作流（Codex MCP、配置规范）**

---

## 📚 学习要点

### 1) 金融计算与银行产品
- **等额还款真实利率**：从还款计划出发，用**现金流折现**思路估算 **IRR/APR（内部收益率/年化实际利率）**；区分名义利率与实际成本，能给出“总利息”“有效年化”的口径。
- **招商银行“代收协议”**：理解为**授权代扣/自动扣款**（第三方或银行代为发起扣款），区分与“自动还款/自动转账”的差异（发起方、场景、撤销路径）。

### 2) 基础设施与网络
- **K8s 实例 IP 与节点 IP 的区别**：  
  - 实例（Pod/容器）IP：`10.100.x.y`（典型 Pod 网段）。  
  - 节点（Node）IP：`172.16.x.y`（宿主机私网）。  
  - 二者皆属 **RFC1918 私有网段**：  
    - `10.0.0.0/8`（约 1677 万地址）  
    - `172.16.0.0/12`（约 104 万地址）  
    - `192.168.0.0/16`（约 6.5 万地址）

### 3) 消息队列与契约（RocketMQ）
- **一个 group 监听多个 topic**：可以，但更**推荐按职责拆分 group**，避免不同业务的位点/幂等互相影响，订阅与流量治理更清晰。
- **命名与契约**：`<env>_<domain>_<entity>_<event>_topic`；消息固定字段 `eventType/bizId/op/ts/traceId/payload`，**版本化**并保持**向后兼容**。

### 4) SQL 与异常定位

* **`SQLSyntaxErrorException` / 数据截断**：排查字段长度/类型、字符集与排序规则、保留字冲突、隐式转换；对可疑长文本字段，先 `LEFT(val, N)` 回放验证再扩容类型。
* **去重/更新安全范式**：避免 1093 错误（更新表同时用于子查询），用**窗口函数 + JOIN 回写**的两步走模式。

### 5) 构建与包管理

* **SDKMAN**：

  * 查看已用版本：`sdk current`
  * 查看可用版本：`sdk list java`
  * 卸载：`sdk uninstall <candidate> <version>`
* **Node 生态快辨**：

  * `Node.js`（运行时）、`npm`（包管理器）、`node`（可执行命令）；
  * `Next.js` 是 React 全栈框架，**不是** Python 的替代品；
  * `uv`（Python 包/环境管理）与 npm/Node 生态无直接等价。

### 6) JSON 字符串转义与编辑器技巧

* 代码侧：`json.dumps(obj, ensure_ascii=False)`（Python）/ `ObjectMapper.writeValueAsString(obj)`（Java Jackson）。
* 编辑器侧：VS Code 可用**多光标选择 + 转义插件**或临时片段 `JSON.stringify(text)` 生成转义结果。

### 7) AI 工具与工作流（Codex / MCP / 使用配额）

* **Codex MCP 配置**：

  * TOML 语法：**表格写法**避免在“内联表”里换行；
  * 形如：

    ```toml
    [mcp_servers.deepwiki]
    command = "http"
    url = "https://mcp.deepwiki.com/mcp"

    trust_level = "trusted"
    ```
  * “No such file or directory”：确认 `command` 在 PATH，可改用绝对路径或先安装依赖。
* **GPT-5 / GPT-5-Thinking 使用限制理解**：

  * “**Plus/Business** 可手动选择 GPT-5-Thinking，**每周约 3000 条消息上限**”的规则；
  * “**自动切换**从 GPT-5 到 GPT-5-Thinking**不计入**该周上限”，但**手动选择**才计入（来自你贴的官方帮助文档链接）。

### 8) Java 生态与版本路线

* **Java 新闻速读**：快速认识活跃项目与社区动向，拓展 Spring 之外的云原生框架（Quarkus/Micronaut/Helidon/Vert.x 等）。
* **Spring 6.2 → 7.0 升级要点**：对齐 **Jakarta EE 11**、**JDK 25 LTS**、**Kotlin 2**，并与 **GraalVM / Project Leyden** 战略靠拢；注意**保持 JDK 17 基线**兼容窗口。

### 9) 交付与可观测补课

* **锁超时调整**：分布式锁从 3s→10s，改善高并发下的获取失败；
* **UAT 配置与发布**：完善 Nacos 配置、合并 release 分支；
* **链路可观测**：围绕**任务积压、处理时长、日志埋点**做最小闭环。

---

## 🛠️ 速用清单（Mini-Checklist）

* **金融核算**：列出每期现金流（负号=支出），用 IRR/APR 口径核算；核对账单“应还/实还”。
* **MQ 策略**：一职责一 group；幂等键 + 退避重试 + DLQ；订阅多 topic 时谨慎评估流量/读位点。
* **SQL 变更**：先演练只读 SELECT（带窗口函数），再 JOIN 回写；大字段扩容前做截断回放。
* **MCP 配置**：TOML 用分段表；`command` 在 PATH；必要时绝对路径。
* **构建/工具**：`sdk current/list/uninstall` 常备；区分 Node/Next.js 与 Python 工具链。
* **可观测**：锁超时、异常率、任务时延三指标先上线。

---

## 参考链接（来自你贴的原文）

* InfoQ《Java News Roundup – Aug 25, 2025》：[https://www.infoq.com/news/2025/09/java-news-roundup-aug25-2025/](https://www.infoq.com/news/2025/09/java-news-roundup-aug25-2025/)
* OpenAI Help：

  * Using Codex with your ChatGPT plan：[https://help.openai.com/en/articles/11369540-using-codex-with-your-chatgpt-plan](https://help.openai.com/en/articles/11369540-using-codex-with-your-chatgpt-plan)
  * GPT-5 in ChatGPT：[https://help.openai.com/en/articles/11909943-gpt-5-in-chatgpt](https://help.openai.com/en/articles/11909943-gpt-5-in-chatgpt)
